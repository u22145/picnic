{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport liff from \"@line/liff\";\nimport popup from \"../components/popup\";\nimport store from \"../store/tags\";\nexport default {\n  name: \"friendPage\",\n  components: {\n    popup\n  },\n  props: [\"userInfo\", 'setShareFinishType'],\n  data() {\n    return {\n      dialog: false,\n      popupIconType: \"\",\n      popupItem: \"\",\n      prize: \"\",\n      shareFinish: false,\n      canSendTime: \"\",\n      shareMsgSuccess: false\n    };\n  },\n  computed: {\n    friendTags() {\n      //æ„›é…·æ¨™ç±¤\n      return store.state.friendTags;\n    }\n  },\n  methods: {\n    // é‚€è«‹lineå¥½å‹\n    shareMsg() {\n      var me = this;\n      const oaUrl = me.$liffUrl + '?v=' + new Date().getTime();\n      if (!liff.isApiAvailable(\"shareTargetPicker\")) {\n        swal.fire({\n          icon: \"error\",\n          title: \"æ‚¨çš„Lineç‰ˆæœ¬ä¸æ”¯æ´æ­¤åŠŸèƒ½\",\n          text: \"è«‹å˜—è©¦æ›´æ–°Line appå¾Œï¼Œå†æ¬¡ä½¿ç”¨æ­¤åŠŸèƒ½\"\n        });\n      } else {\n        // swal.fire({\n        //   allowOutsideClick: false,\n        // });\n        // swal.showLoading();\n        liff.shareTargetPicker([{\n          type: \"text\",\n          text: \"ç¾åœ¨åŠ å…¥ä¸¦æˆåŠŸé‚€è«‹å¥½å‹æœ€é«˜å¯æŠ½LINE POINTS 80é»ğŸ¥°ğŸ¥°\\n\\nã€ğŸŒ¸èŠ±è¦‹å¥½ç”Ÿæ´» æ˜¥é¢¨è²“é™ªä½ é‡é¤è³æ«»è¶£ğŸ±ã€‘\\n ğŸ“† å³æ—¥èµ·è‡³2023/04/20æ­¢\\nğŸ“é‚€è«‹å¥½å‹åŠ å…¥æ˜¥é¢¨ï¼Œæ¯æˆåŠŸé‚€è«‹1ä½é€10é»LINE POINTSï¼Œæœ€é«˜30é»~ï¼ˆæ¯äººé™é ˜ä¸€æ¬¡ï¼Œå…±400åï¼‰\\n ğŸ“æˆåŠŸé‚€è«‹3ä½ï¼ŒåŠ ç¢¼æŠ½50é»ï¼ï¼ˆå…±80åï¼‰\\n\\n ğŸ›’æ´»å‹•æœŸé–“å…§ï¼Œå–®ç­†è³¼è²·æ˜¥é¢¨å…¨ç³»åˆ—å•†å“æ»¿168å…ƒï¼Œå†æŠ½iPadç­‰å¤šé …å¥½ç¦®ï¼\\n\\nğŸ‘‡é»æ“Šä¸‹æ–¹åœ–ç‰‡ç«‹å³åŠ å…¥ğŸ‘‡\",\n          wrap: true\n        }, {\n          type: \"flex\",\n          altText: \"æ˜¥é¢¨è²“å¥½å¥½ç”Ÿæ´»ç¯€ï¼Œç¾åœ¨åŠ å…¥ä¸¦æˆåŠŸé‚€è«‹å¥½å‹ï¼Œé€å…è²»LINE POINTS\",\n          contents: {\n            type: \"bubble\",\n            size: \"giga\",\n            hero: {\n              type: \"image\",\n              url: me.$apiUrl + \"/sharing1.jpg?v=\" + new Date().getTime(),\n              size: \"full\",\n              aspectRatio: \"1:1\",\n              aspectMode: \"cover\",\n              action: {\n                type: \"uri\",\n                uri: `${oaUrl}?inviteCode=${this.userInfo.inviteCode}#`\n              }\n            }\n          }\n        }]).then(function (res) {\n          if (res) {\n            // succeeded in sending a message through TargetPicker\n            // console.log(`[${res.status}] Message sent!`)\n            me.shareMsgSuccess = true;\n          } else {\n            const [majorVer, minorVer] = (liff.getLineVersion() || \"\").split(\".\");\n            if (parseInt(majorVer) == 10 && parseInt(minorVer) < 11) {\n              // LINE 10.3.0 - 10.10.0\n              // Old LINE will access here regardless of user's action\n              // TargetPicker è‡³å°‘å·²æ‰“é–‹ã€‚æ˜¯å¦æˆåŠŸç™¼é€æ¶ˆæ¯ä¸æ¸…æ¥š\n              me.shareMsgSuccess = true;\n            } else {\n              // LINE 10.11.0 -\n              // sending message canceled\n              // console.log('TargetPicker was closed!')\n              // å–æ¶ˆåˆ†äº«\n              me.shareMsgSuccess = false;\n            }\n          }\n          if (me.shareMsgSuccess) {\n            // å·²æˆåŠŸåˆ†äº«å¥½å‹è¨Šæ¯\n            me.shareFinish = true;\n            this.$emit('shareFinishType', this.shareFinish);\n          } else {\n            // userå–æ¶ˆåˆ†äº«\n            // alert(\"\")\n          }\n        }).catch(function (error) {\n          // something went wrong before sending a message\n          console.log(error);\n          alert(\"ç³»çµ±å¿™ç¢Œä¸­ï¼Œè«‹ç¨å¾Œå†è©¦ !!\");\n        }).finally(() => {\n          // swal.close();\n        });\n      }\n    },\n    // å–å¾—é©—è­‰ç¢¼çš„å€’æ•¸ç§’æ•¸\n    getCanSendTime() {\n      var me = this;\n      me.url = \"/Liff/GetData_SmsCanSendTime/54CF6E71502D44198838C6C21DA43F0A\";\n      var config = {\n        method: \"get\",\n        headers: {\n          Authorization: `Bearer ${me.$accessToken}`\n        },\n        url: me.$apiUrl + me.url\n      };\n      swal.fire({\n        didOpen: () => {\n          swal.fire({\n            allowOutsideClick: false\n          });\n          swal.showLoading();\n          axios(config).then(res => {\n            var data = res.data;\n            if (data && data.success) {\n              // å‰©é¤˜ç§’æ•¸\n              me.canSendTime = data.data;\n            }\n          }).catch(err => {\n            console.log(err);\n            alert(\"ç³»çµ±å¿™ç¢Œä¸­ï¼Œè«‹ç¨å¾Œå†è©¦\");\n          }).finally(() => {\n            swal.close();\n          });\n        }\n      });\n    },\n    seePopUp(val) {\n      this.dialog = true;\n      this.popupIconType = \"icon\" + val;\n      this.popupItem = val;\n    },\n    changeAeMember() {\n      this.$emit(\"changeAeMember\", true);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}